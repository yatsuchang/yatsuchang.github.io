(this["webpackJsonppolyplay-admin"]=this["webpackJsonppolyplay-admin"]||[]).push([[9],{1420:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"_feeReceipient","type":"address"},{"internalType":"uint256","name":"_feePercent","type":"uint256"},{"internalType":"address","name":"_burnAddress","type":"address"},{"internalType":"uint256","name":"_burnPercent","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"league","type":"address"},{"indexed":false,"internalType":"address","name":"creator","type":"address"}],"name":"NewLegueCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"burnAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"burnPercent","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"entryAmount","type":"uint256"},{"internalType":"uint256","name":"startTime","type":"uint256"},{"internalType":"uint256","name":"closeTime","type":"uint256"},{"internalType":"uint256","name":"maxChoiceNumber","type":"uint256"},{"internalType":"uint256","name":"expectLength","type":"uint256"},{"internalType":"string","name":"meta","type":"string"}],"name":"createLeague","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"feePercent","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"feeReceipient","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getFeeInfo","outputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getLeaguesCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"isOperator","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"leagues","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_feeReceipient","type":"address"},{"internalType":"uint256","name":"_feePercent","type":"uint256"},{"internalType":"address","name":"_burnAddress","type":"address"},{"internalType":"uint256","name":"_burnPercent","type":"uint256"}],"name":"setFeeInfo","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"bool","name":"bSet","type":"bool"}],"name":"setOperator","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},1438:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n.n(a),i=n(90),o=n(50),s=n(354),c=n(357),u=n(109),l=n(65),p=n(72),d=n(91),m=n(0),b=n(6),h=n(8),y=n(112),f=n(1420),x=function(){function e(t,n,a){if(Object(b.a)(this,e),this.provider=void 0,this.contract=void 0,this.provider=t,n){var r=t.getSigner();this.contract=new y.a.Contract(a,f,t).connect(r)}else this.contract=new y.a.Contract(a,f,t)}return Object(h.a)(e,[{key:"address",get:function(){return this.contract.address}},{key:"createLeague",value:function(){var e=Object(i.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.createLeague(t.token,t.entryAmount,t.startTime,t.closeTime,t.maxChoiceNumber,t.expectLength,t.meta);case 2:return n=e.sent,console.log("createLeague transaction hash: ".concat(n.hash)),e.abrupt("return",n.hash);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),T=n(1424),g=n(1435),j=n(1443),v=n(375),O=n(523),w=n(524),k=n(508),C=n.n(k),L=n(440),N=n(522),M=n(41),S=n(7),B=Object(s.a)((function(e){return{root:{paddingBottom:24},form:{"& > * + *":{marginTop:16}},row:{display:"flex",alignItems:"center","& > * + *":{marginLeft:8}},date:{position:"relative","& svg":{color:e.colors.white}},dateLabel:{color:e.colors.white},button:{"& span":{fontWeight:600,color:e.colors.black},"&:disabled":{backgroundColor:"".concat(Object(M.a)(.8,e.colors.white)," !important")}},label:{color:e.colors.white,marginBottom:5},imagesRow:{display:"flex",overflowX:"auto",paddingBottom:12},imageItem:{marginRight:12,position:"relative","& img":{height:118,minWidth:120,border:"1px dashed ".concat(e.colors.default),borderRadius:16},"& button":{position:"absolute",top:12,right:12,padding:8,backgroundColor:e.colors.black,color:e.colors.white}},choices:{padding:"0 12px",border:"1px solid ".concat(e.colors.white),borderRadius:4},choiceInput:{marginTop:8}}})),D=function(e){var t=B(),n=Object(d.b)().enqueueSnackbar,a=Object(p.b)(),o=a.setTxModalInfo,s=a.account,m=a.networkId,b={external:"",banner:"",title:"",description:"",bannerFile:null,bannerObjectUrl:"",choices:[],token:"",entryAmount:0,startTime:C()().format("YYYY-MM-DDTHH:m"),closeTime:C()().format("YYYY-MM-DDTHH:m"),maxChoiceNumber:0,expectLength:0};return Object(S.jsx)("div",{className:t.root,children:Object(S.jsx)(O.b,{initialValues:b,onSubmit:function(){var t=Object(i.a)(r.a.mark((function t(a,i){var s,c,u,p,d,b,h,y,f;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=i.setSubmitting,c=C()(a.startTime).unix(),u=C()(a.closeTime).unix(),!(c>u)){t.next=6;break}return n("StartTime should be earlier than closeTime",{variant:"error"}),t.abrupt("return");case 6:if(a.bannerFile){t.next=9;break}return n("Please select banner",{variant:"error"}),t.abrupt("return");case 9:p=0;case 10:if(!(p<a.choices.length)){t.next=18;break}if(""!==a.choices[p]){t.next=15;break}return n("Please fill choices",{variant:"error"}),t.abrupt("return");case 15:p++,t.next=10;break;case 18:return s(!0),o(!0,"Uploading meta data to fleek ..."),t.prev=20,t.next=23,Object(L.b)(a.bannerFile);case 23:return d=t.sent,b={external:a.external,description:a.description,title:a.title,banner:d,choices:a.choices},console.log("===metaData===",b),t.next=28,Object(L.a)(JSON.stringify(b));case 28:return h=t.sent,console.log("====metaUri=====",h),y=Object(l.d)(a.token,m),f={meta:h,token:a.token,entryAmount:Object(N.parseUnits)(a.entryAmount.toString(),y.decimals),startTime:C()(a.startTime).unix(),closeTime:C()(a.closeTime).unix(),maxChoiceNumber:a.maxChoiceNumber,expectLength:a.expectLength},console.log("====leagueData====",f),t.next=35,e.onSubmit(f);case 35:s(!1),t.next=42;break;case 38:t.prev=38,t.t0=t.catch(20),s(!1),o(!1);case 42:case"end":return t.stop()}}),t,null,[[20,38]])})));return function(e,n){return t.apply(this,arguments)}}(),validationSchema:w.b().shape({external:w.c().matches(/^(https)/),title:w.c().required(),description:w.c().required(),token:w.c().matches(/^0x[a-fA-F0-9]{40}$/).required(),startTime:w.c().required(),closeTime:w.c().required(),maxChoiceNumber:w.a().positive(),expectLength:w.a().positive()}),children:function(e){var n=e.errors,a=e.handleBlur,r=e.handleChange,i=e.handleSubmit,o=e.isSubmitting,p=e.isValid,d=e.setFieldValue,b=e.touched,h=e.values;return Object(S.jsxs)(O.a,{className:t.form,onSubmit:i,children:[Object(S.jsx)(T.a,{error:Boolean(b.external&&n.external),fullWidth:!0,helperText:b.external&&n.external,id:"external",label:"External Info Website",name:"external",onBlur:a,onChange:r,placeholder:"https://",value:h.external}),Object(S.jsx)(u.b,{id:"banner-uploader",onChange:function(e){d("bannerFile",e),h.bannerObjectUrl&&URL.revokeObjectURL(h.bannerObjectUrl),d("bannerObjectUrl",e?URL.createObjectURL(e):"")},placeholder:"Please upload Banner",size:{width:300,height:300},value:{file:h.bannerFile,fileUrl:h.bannerObjectUrl}}),Object(S.jsx)(T.a,{error:Boolean(b.title&&n.title),fullWidth:!0,helperText:b.title&&n.title,id:"title",label:"Title",name:"title",onBlur:a,onChange:r,placeholder:"title",value:h.title}),Object(S.jsx)(T.a,{error:Boolean(b.description&&n.description),fullWidth:!0,helperText:b.description&&n.description,id:"description",label:"Description",multiline:!0,name:"description",onBlur:a,onChange:r,placeholder:"Description",value:h.description}),Object(S.jsx)(T.a,{error:Boolean(b.token&&n.token),fullWidth:!0,helperText:b.token&&n.token,id:"token",label:"Entry Token",name:"token",onBlur:a,onChange:r,select:!0,value:h.token,children:Object.values(l.h).map((function(e){var n=Object(l.c)(e,m);return Object(S.jsx)(g.a,{value:n.address,children:Object(S.jsxs)("div",{className:t.row,children:[Object(S.jsx)(j.a,{src:n.image}),Object(S.jsxs)(c.a,{children:[n.name," (",n.symbol.toUpperCase(),")"]})]})},e)}))}),Object(S.jsx)(T.a,{error:Boolean(b.entryAmount&&n.entryAmount),fullWidth:!0,helperText:b.entryAmount&&n.entryAmount,id:"entryAmount",label:"Entry Token Amount",name:"entryAmount",onBlur:a,onChange:r,placeholder:"0",type:"number",value:h.entryAmount}),Object(S.jsx)(T.a,{className:t.date,error:Boolean(b.startTime&&1e3*C()(h.startTime).unix()<Date.now()),fullWidth:!0,helperText:b.startTime&&1e3*C()(h.startTime).unix()<Date.now()?"You can't set Past Time":"".concat(C()(h.startTime).utc().format("YYYY-MM-DD HH:mm")," UTC (").concat(C()(h.startTime).unix(),")"),label:"Start Time",id:"startTime",name:"startTime",type:"datetime-local",value:h.startTime,InputLabelProps:{shrink:!0},onBlur:a,onChange:r}),Object(S.jsx)(T.a,{className:t.date,error:Boolean(b.closeTime&&1e3*C()(h.closeTime).unix()<Date.now()),fullWidth:!0,helperText:b.closeTime&&1e3*C()(h.closeTime).unix()<Date.now()?"You can't set Past Time":"".concat(C()(h.closeTime).utc().format("YYYY-MM-DD HH:mm")," UTC (").concat(C()(h.closeTime).unix(),")"),label:"Close Time",id:"closeTime",name:"closeTime",type:"datetime-local",value:h.closeTime,InputLabelProps:{shrink:!0},onBlur:a,onChange:r}),Object(S.jsx)(T.a,{error:Boolean(b.maxChoiceNumber&&n.maxChoiceNumber),fullWidth:!0,id:"maxChoiceNumber",label:"Max Choice Number",name:"maxChoiceNumber",onBlur:a,onChange:function(e){r(e);for(var t=Number(e.target.value||"0"),n=[],a=0;a<t;a++)n.push(h.choices[a]||"");d("choices",n)},placeholder:"0",type:"number",value:h.maxChoiceNumber}),Object(S.jsx)(T.a,{error:Boolean(b.expectLength&&n.expectLength),fullWidth:!0,id:"expectLength",label:"Expect Select Count",name:"expectLength",onBlur:a,onChange:r,placeholder:"0",type:"number",value:h.expectLength}),Object(S.jsxs)("div",{className:t.choices,children:[Object(S.jsx)(c.a,{className:t.dateLabel,children:"Choices"}),Object(S.jsx)("br",{}),h.choices.map((function(e,n){return Object(S.jsx)(T.a,{className:t.choiceInput,fullWidth:!0,label:"Choice Name ".concat(n+1),onChange:function(e){var t=h.choices.map((function(t,a){return n===a?e.target.value:t}));d("choices",t)},value:e},"".concat(n))}))]}),Object(S.jsx)(v.a,{className:t.button,color:"primary",disabled:!p||o||!s,fullWidth:!0,type:"submit",variant:"contained",children:"Submit"})]})}})})},U=Object(s.a)((function(e){return{root:{},title:{color:e.colors.white,fontSize:24,fontWeight:600,margin:"16px 0"}}}));t.default=function(){var e=U(),t=Object(p.b)(),n=t.account,a=t.library,s=t.networkId,b=t.setTxModalInfo,h=Object(d.b)().enqueueSnackbar,y=Object(m.useState)(!0),f=Object(o.a)(y,2),T=f[0],g=f[1],j=function(){var e=Object(i.a)(r.a.mark((function e(t){var i,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&a&&s){e.next=2;break}return e.abrupt("return");case 2:return b(!0,"Creating League..."),e.prev=3,i=Object(l.a)("leagueController",s),o=new x(a,n,i),e.next=8,o.createLeague(t);case 8:return c=e.sent,b(!0,"Creating League...","Please wait...",c),e.next=12,a.waitForTransaction(c);case 12:b(!1),g((function(){return!1})),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(3),console.error(e.t0),b(!1),h(e.t0.message||"Something went wrong",{variant:"error"});case 21:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.useEffect)((function(){g(!1)}),[s]),Object(m.useEffect)((function(){T||g(!0)}),[T]),Object(S.jsxs)(u.d,{children:[Object(S.jsx)(c.a,{className:e.title,children:"New League"}),T&&Object(S.jsx)(D,{onSubmit:j})]})}},440:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var a=n(4),r=n.n(a),i=n(90),o=n(509),s=n.n(o),c=n(24),u=function(){var e=Object(i.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.upload({apiKey:c.b,apiSecret:c.c,key:"".concat(Date.now()),data:t});case 2:return n=e.sent,e.abrupt("return",n.publicUrl);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e){return new Promise((function(t,n){var a=new FileReader;a.onload=Object(i.a)(r.a.mark((function e(){var i,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.result,e.prev=1,e.next=4,s.a.upload({apiKey:c.b,apiSecret:c.c,key:"".concat(Date.now()),data:i});case 4:o=e.sent,t(o.publicUrl),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),a.onerror=function(){n(a.error)},a.readAsDataURL(e)}))}},443:function(e,t){}}]);
//# sourceMappingURL=9.f81aaf53.chunk.js.map